# ─────────────────────────────────────────────────────────────────────────────
# CLOUDFLARE ACCOUNT
# ─────────────────────────────────────────────────────────────────────────────

# The email address associated with your Cloudflare account
CF_EMAIL="you@example.com"

# Your Cloudflare Global API Key — found at:
# https://dash.cloudflare.com/profile/api-tokens
# Scroll down to "Global API Key" and click "View"
CF_GLOBAL_KEY="your_cloudflare_global_api_key"

# ─────────────────────────────────────────────────────────────────────────────
# DOMAIN
# ─────────────────────────────────────────────────────────────────────────────

# The root domain you own and have registered with Namecheap
# Example: "example.com"
# Note: This script handles simple TLDs (.com, .net, .org etc.)
# It does not currently handle multi-part TLDs like .co.uk
DOMAIN="yourdomain.com"

# The subdomain you want Radicale to be accessible at
# Combined with DOMAIN this becomes e.g. "radicale.yourdomain.com"
# You can use anything you like — "cal", "dav", "sync", etc.
SUBDOMAIN="radicale"

# ─────────────────────────────────────────────────────────────────────────────
# CLOUDFLARE TUNNEL
# ─────────────────────────────────────────────────────────────────────────────

# A name for your Cloudflare tunnel — used to identify it in the dashboard
# No spaces. Example: "radicale", "home-dav", "my-tunnel"
TUNNEL_NAME="radicale"

# ─────────────────────────────────────────────────────────────────────────────
# RADICALE CREDENTIALS
# ─────────────────────────────────────────────────────────────────────────────

# The username you will use to log in to Radicale
# This also appears in your DAVx5 URL:
# https://radicale.yourdomain.com/<RADICALE_USER>/
RADICALE_USER="youruser"

# The password you will use to log in to Radicale
# Use something strong — this is the only thing protecting your data
RADICALE_PASS="yourpassword"

# ─────────────────────────────────────────────────────────────────────────────
# CLOUDFLARE EMAIL ROUTING + INGEST
# ─────────────────────────────────────────────────────────────────────────────

# Cloudflare Zone ID for natecalvert.org
# Found at: dash.cloudflare.com -> natecalvert.org -> right sidebar -> Zone ID
CF_ZONE_ID="your_zone_id"

# Cloudflare Account ID
# Found at: dash.cloudflare.com -> right sidebar -> Account ID
CF_ACCOUNT_ID="your_account_id"

# Cloudflare API token with Email Routing write + Workers write permissions
# Create at: dash.cloudflare.com/profile/api-tokens
# Permissions needed: Zone > Email Routing Rules > Edit, Account > Workers Scripts > Edit
CF_API_TOKEN="your_cf_api_token"

# Shared secret between the Cloudflare Email Worker and ingest.py
# Generate with: openssl rand -hex 32
# Also set as a Worker secret: wrangler secret put INGEST_TOKEN
INGEST_TOKEN="your_ingest_token"

# Base URL for ingest.py to reach Radicale inside Docker (internal network)
# Do not change unless you rename the radicale service in docker-compose.yml
RADICALE_INTERNAL_URL="http://radicale:5232"

# Port the ingest HTTP server listens on inside the container
# Only change this if 8000 conflicts with something
INGEST_PORT="8000"

# Calendar address-to-collection map
# Format: comma-separated addr:/collection/path/ pairs
# The collection path is the CalDAV path under RADICALE_INTERNAL_URL
# Use provision-calendar.sh to add entries — or edit manually and restart ingest
CALENDAR_MAP="pickleball@natecalvert.org:/nate/bounce_calendar/,appointments@natecalvert.org:/nate/appointments/,tasks@natecalvert.org:/nate/tasks/"

# ─────────────────────────────────────────────────────────────────────────────
# PROTON BRIDGE
# ─────────────────────────────────────────────────────────────────────────────

# The email address of your Proton Mail account
PROTON_EMAIL="you@proton.me"

# The name of the folder in your Proton Mail account to watch for .ics files
# This is the folder you will move emails with .ics attachments into
# Example: "CalendarImport", "ICS", "ToSync"
PROTON_FOLDER="CalendarImport"

# Passphrase for the GPG key used by pass to store Bridge credentials
# This needs to be strong since it protects access to your Proton account
# It will be stored in this file which is gitignored and readable only by
# your user. It is used by gpg-agent to allow Bridge to run unattended.
GPG_PASSPHRASE="your_gpg_passphrase"

# ─────────────────────────────────────────────────────────────────────────────
# ICS SYNC
# ─────────────────────────────────────────────────────────────────────────────

# The full CalDAV URL of the Radicale calendar to push events into
# This is the URL of the specific calendar collection, not just the base URL
# Example: "https://radicale.yourdomain.com/youruser/calendar/"
RADICALE_CALENDAR_URL="https://radicale.yourdomain.com/youruser/calendar/"

# Path to the log file that tracks which emails have already been processed
# This file is gitignored and never committed
ICS_SYNC_LOG="./logs/ics-sync.log"

# The IMAP port that Proton Bridge is listening on
# This is filled in automatically by bridge-setup.sh after the Bridge login
# Default is 1143. Do not change this unless Bridge reports a different port.
BRIDGE_IMAP_PORT="1143"

# The IMAP password generated by Proton Bridge for your account
# This is NOT your Proton Mail password — Bridge generates a separate one
# This is filled in automatically by bridge-setup.sh after the Bridge login
BRIDGE_IMAP_PASS=""

# ─────────────────────────────────────────────────────────────────────────────
# GMAIL (for send-test-email.py)
# Used to send test emails with .ics attachments to your Proton address.
# Only needed for debugging the auto-sync trigger path.
#
# Generate an app password at https://myaccount.google.com/apppasswords
# See the walkthrough in project docs for scoped setup instructions.
# ─────────────────────────────────────────────────────────────────────────────

# Your Gmail address
GMAIL_USER="you@gmail.com"

# Gmail app password (not your regular password)
# 16 characters, no spaces
GMAIL_APP_PASS="your_gmail_app_password"

# ─────────────────────────────────────────────────────────────────────────────
# GITHUB
# Two tokens are required. Create both before running github-setup.sh.
#
# GITHUB_TOKEN — short-lived setup token (classic PAT):
#   1. Go to https://github.com/settings/tokens
#   2. Click "Generate new token (classic)"
#   3. Name it e.g. "radicale-repo-setup"
#   4. Set expiration to 7 days
#   5. Check the "repo" scope
#   6. Click "Generate token" and paste below
#   github-setup.sh will revoke this automatically after the repo is created.
#
# GITHUB_COMMIT_TOKEN — long-lived commit token (fine-grained PAT):
#   1. Go to https://github.com/settings/personal-access-tokens/new
#   2. Name it e.g. "radicale-commit"
#   3. Set expiration to "No expiration"
#   4. Under "Repository access" select "Only select repositories"
#      and choose your Radicale repo
#   5. Under "Permissions > Repository permissions" set Contents to
#      "Read and write"
#   6. Click "Generate token" and paste below
#   This token is stored in config.env (gitignored) and used by commit.sh
#   for all future pushes.
# ─────────────────────────────────────────────────────────────────────────────

# Your GitHub username
GITHUB_USERNAME="your_github_username"

# The name of the repository to create
# Will be created at https://github.com/<GITHUB_USERNAME>/<GITHUB_REPO>
GITHUB_REPO="radicale-selfhost"

# Short-lived setup token — used once to create the repo, then revoked
GITHUB_TOKEN="your_github_personal_access_token"

# Long-lived commit token — used by commit.sh for all future pushes
# Scoped to Contents read/write on this repo only, no expiry
GITHUB_COMMIT_TOKEN="your_github_commit_token"
